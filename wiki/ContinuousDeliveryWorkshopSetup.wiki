= How to install the Workshop Installation =

 * Checkout [https://xebia-france.googlecode.com/svn/cloudcomputing/xebia-cloudcomputing-extras/trunk]
  {{{
svn checkout https://xebia-france.googlecode.com/svn/cloudcomputing/xebia-cloudcomputing-extras/trunk workshop
  }}}
 * Configure your credentials in src/main/resources/!AwsCredentials.properties (see the [http://xebia-france.googlecode.com/svn/cloudcomputing/xebia-cloudcomputing-extras/trunk/src/main/resources/AwsCredentials.properties.template template file])
  {{{
cd workshop; cp /path/to/aws-credentials.txt src/main/resources/AwsCredentials.properties
  }}}
 * To create the infrastructure, run {{{fr.xebia.workshop.continuousdelivery.ContinuousDeliveryInfrastructureCreator}}}
  {{{
mvn clean package exec:java -Dexec.mainClass="fr.xebia.workshop.continuousdelivery.ContinuousDeliveryInfrastructureCreator"
  }}}
 * To generate the documentation of the infrastructure (labs wiki pages), run {{{fr.xebia.workshop.continuousdelivery.ContinuousDeliveryInfrastructureDocsGenerator}}}
  {{{
mvn clean package exec:java -Dexec.mainClass="fr.xebia.workshop.continuousdelivery.ContinuousDeliveryInfrastructureDocsGenerator"
  }}}
 * This scripts creates :
   * 1 Nexus server (common for all teams) 
     * Amazon EC2 Name : "nexus"
     * URL: http://nexus.xebia-tech-event.info:8081/nexus/
   * 1 Jenkins/Rundeck server per team
     * Amazon EC2 Names : {{{jenkins-${team-identifier}}}}
   * 1 Tomcat dev server per team
     * Amazon EC2 Name: {{{tomcat-${team-identifier}-dev-1}}}
   * 2 Tomcat valid servers per team
     * Amazon EC2 Names: {{{tomcat-${team-identifier}-valid-1}}} & {{{tomcat-${team-identifier}-valid-2}}}
   * 1 Petclinic project per team under Xebia Training's Github account ([https://github.com/xebia-france-training/]{{{xebia-petclinic-${team-identifier}}}})
   * A job under each team's Jenkins server to build the team's Petclinic project


= Specifications =

== Nexus ==

 * Logs: {{{/opt/nexus/nexus-oss-webapp-1.9.2.2/logs/}}}

== Jenkins / Rundeck servers ==

 * Installed package: JDK, Jenkins (with plugins Batch Task, Git, SSH and Rundeck), Rundeck, Maven, Git
  ** [https://wiki.jenkins-ci.org/display/JENKINS/Batch+Task+Plugin Batch Task Plugin for Jenkins]
  ** [https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin Git Plugin for Jenkins]
  ** [https://wiki.jenkins-ci.org/display/JENKINS/Github+Plugin Github Plugin for Jenkins]
  ** [https://wiki.jenkins-ci.org/display/JENKINS/Rundeck+Plugin Rundeck Plugin for Jenkins]
  ** [https://wiki.jenkins-ci.org/display/JENKINS/SSH+Plugin SSH Plugin for Jenkins]
 * Configuration: 
  ** "{{{continuous-delivery-workshop.pem}}}" in both {{{${jenkins-user-home}/.ssh}}} and {{{${rundeck-user-home}/.ssh}}}
  ** maven settings.xml with Nexus repos url, login &password
 * [http://xebia-france.googlecode.com/svn/cloudcomputing/xebia-cloudcomputing-extras/trunk/src/main/resources/fr/xebia/workshop/continuousdelivery/cloud-config-amzn-linux-jenkins-rundeck.txt cloud-config-amzn-linux-jenkins-rundeck.txt]
 * Petclinic job configuration:
  ** [https://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API Jenkins remote access API]
  ** [http://xebia-france.googlecode.com/svn/cloudcomputing/xebia-cloudcomputing-extras/trunk/src/main/resources/fr/xebia/workshop/continuousdelivery/petclinic-jenkins-job-config.xml.fmt petclinic-jenkins-job-config.xml.fmt]


== Tomcat servers ==

 * Installed package: jdk
 * Additional anstalled software:
 ** Tomcat 6, not installed by RPM because the Tomcat 6 RPM start/stop script ({{{/usr/sbin/tomcat6}}}) can not be invoked directly by tomcat user. {{{/usr/sbin/tomcat6}}} script must be invoked by linux tomcat6 service ({{{service tomcat6 start|stop}}}.
 * Configuration: 
   * allow ssh connection as "{{{tomcat}}}" user with "{{{continuous-delivery-workshop.pem}}}"
   * grant access to tomcat-manager webapp to tomcat/tomcat, manager/manager and admin/admin
   * add "{{{ec2-user}}}" to group {{{tomcat}}}"
 * CloudInit: [https://xebia-france.googlecode.com/svn/cloudcomputing/xebia-cloudcomputing-extras/trunk/src/main/resources/fr/xebia/workshop/continuousdelivery/cloud-config-amzn-linux-tomcat.txt cloud-config-amzn-linux-tomcat.txt]

= Documentation =

 * Keynote presentation : {{{workshop-continuous-delivery.key}}} in https://www.dropbox.com/home/java-infra-as-code-with-amazon-aws#/
 * Omnigraffle diagrams:  {{{automated-deployment-workshop.graffle}}} in https://www.dropbox.com/home/java-infra-as-code-with-amazon-aws#/

= Diagrams =


== Per Team Infrastructure ==

<img width="400" src="http://xebia-france.googlecode.com/svn/wiki/cont-delivery-img/per-team-infrastructure.png" />

== Global Lab Infrastructure ==

<img width="400" src="http://xebia-france.googlecode.com/svn/wiki/cont-delivery-img/global-infrastructure.png" />