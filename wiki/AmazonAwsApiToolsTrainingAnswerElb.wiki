= Amazon ELB =

== Create Load Balancer ==

*Command*
{{{
./elb-create-lb petclinic-clc --availability-zones eu-west-1b --listener "protocol=HTTP, lb-port=80, instance-port=8080"
}}}

*Output*
{{{
DNS_NAME  petclinic-clc-214905302.eu-west-1.elb.amazonaws.com
}}}

== Configure health check ==

*Command*
{{{
./elb-configure-healthcheck petclinic-clc --target HTTP:8080/ --healthy-threshold 2 --unhealthy-threshold 2 --interval 30 --timeout 2
}}}

*Output*
{{{
HEALTH_CHECK  HTTP:8080/  30  2  2  2
}}}

== Register instances ==

*Command*
{{{
./elb-register-instances-with-lb petclinic-clc --instances i-fc022b8a, i-fa022b8c
}}}


*Output*
{{{
INSTANCE_ID  i-fc022b8a
INSTANCE_ID  i-fa022b8c
}}}

== Load balancer stickiness ==

*Command*
{{{
./elb-create-lb-cookie-stickiness-policy petclinic-clc --policy-name petclinic-policy-clc
}}}

*Output*
{{{
OK-Creating LB Stickiness Policy
}}}
