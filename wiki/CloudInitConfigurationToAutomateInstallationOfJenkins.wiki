#summary One-sentence summary of this page.

= Introduction =

Jenkins can easily be installed in Amazon EC2 with Cloud Init.
In the following example, Jenkins is set up in an node using a Cloud Config file, one of the possible ways to do something in the first boot of a launched instance.

= Details =

In this example, Jenkins is dowloaded from the URL declared in repo_additions. Once its key imported, the package is set up. The run commands section offers a way to execute a list of commands in order. In this case, we use it to start the service. Commands must be written in a valid yaml syntax.

<code>
{{{
#cloud-config

repo_additions:
 - source: jenkins
   filename: jenkins.repo
   name: Jenkins
   baseurl: http://pkg.jenkins-ci.org/redhat/
   key: http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key
   enabled: 1

packages:
- jenkins

runcmd:
 - [ sh, -xc, "echo $(date) ': cloudinit runcmd begin'" ]
 - [service, jenkins, start ]
 - [ sh, -xc, "echo $(date) ': cloudinit runcmd end'" ]
}}}
</code>

= Debug =

Some tips that will help you debuggin your cloud init file :
-You can check cloud init logs in /var/log/cloud-init.log.
-In order to launch cloud-init without having to create a new instance, you can just erase the semaphores existing in /var/lib/cloud/sem/ and run cloud-init with the your new config :

[ec2-user@ip-10-234-133-197 sem]$ sudo rm *
[ec2-user@ip-10-234-133-197 log]$ sudo /etc/init.d/cloud-init start 